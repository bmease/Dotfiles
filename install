#!/bin/bash

function install_program {
    local program=$1

    if ! hash ${program} 2>/dev/null; then
        read -p "$program is not installed, would you like to install it? (y/n) " -n 1 -r
        if [[ $REPLY =~ ^[Yy]$ ]]; then
            echo
            sudo apt-get install ${program}
        else
            exit 1
        fi
    fi
}

function delete_existing_file {
    local file=$1

    if [ -f ~/.bashrc ]; then
        read -p "Delete previously existing file?: $file (y/n) " -n 1 -r
        if [[ $REPLY =~ ^[Yy]$ ]]; then
            echo
            rm ${file}
        else
            exit 1
        fi
    fi
}

function setup_bash {
    delete_existing_file ~/.bashrc
    stow -v bash
}

function setup_vim {
    install_program vim
    stow -v vim

    # install vundle
    git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
    vim +BundleInstall! +BundleClean +q
}

function setup_tmux {
    install_program tmux
    stow -v tmux
}

install_program stow
setup_bash
setup_vim
setup_tmux

echo "Done!"
